using System;
using System.IO;
using System.Collections.Generic;
using Xunit;
using Xunit.Abstractions;
using MonoTests.System.Threading;
using MonoTests.System.Numerics;
using MonoTests.System.Xml;
using MonoTests.System.Transactions;
using nist_dom;
using MonoTests.System.Security.Cryptography;
using MonoTests.System.ComponentModel.DataAnnotations;
using MonoTests.System;
using MonoTests.System.IO.Compression;
using MonoTests.System.IO.Compression.FileSystem;
using MonoTests.Visit;
using MonoTests.Mono.Data.Sqlite;
using MonoTests.Runtime;


namespace Xamarin.iOS.UnitTests {
	// autogenerated class that uses types from the test assemblies so that
	// they are aot and not linked away.
	public static class RegisterType
	{
		public static bool IsXUnit = false;
		public static Dictionary <string, Type> TypesToRegister = new Dictionary <string, Type> {
			{ "monotouch_System.Core_test.dll", typeof (MonoTests.System.Threading.ReaderWriterLockSlimTests)}, 
			{ "monotouch_System.Numerics_test.dll", typeof (MonoTests.System.Numerics.BigIntegerTest)}, 
			{ "monotouch_System.Runtime.Serialization_test.dll", typeof (MonoTests.System.Xml.UniqueIdTest)}, 
			{ "monotouch_System.Transactions_test.dll", typeof (MonoTests.System.Transactions.AsyncTest)}, 
			{ "monotouch_System.Xml_test.dll", typeof (nist_dom.ITest)}, 
			{ "monotouch_System.Xml.Linq_test.dll", typeof (MonoTests.System.Xml.ExtensionsTest)}, 
			{ "monotouch_Mono.Security_test.dll", typeof (MonoTests.System.Security.Cryptography.SHA224ManagedTest)}, 
			{ "monotouch_System.ComponentModel.DataAnnotations_test.dll", typeof (MonoTests.System.ComponentModel.DataAnnotations.AssociationAttributeTest)}, 
			{ "monotouch_System.Json_test.dll", typeof (MonoTests.System.JsonValueTests)}, 
			{ "monotouch_System.ServiceModel.Web_test.dll", typeof (MonoTests.System.UriTemplateEquivalenceComparerTest)}, 
			{ "monotouch_System.IO.Compression_test.dll", typeof (MonoTests.System.IO.Compression.ZipArchiveTests)}, 
			{ "monotouch_System.IO.Compression.FileSystem_test.dll", typeof (MonoTests.System.IO.Compression.FileSystem.ZipArchiveTests)}, 
			{ "monotouch_Mono.CSharp_test.dll", typeof (MonoTests.Visit.ASTVisitorTest)}, 
			{ "monotouch_System.Security_test.dll", typeof (MonoTests.System.Security.Cryptography.CryptographicAttributeObjectCollectionTest)}, 
			{ "monotouch_Mono.Data.Sqlite_test.dll", typeof (MonoTests.Mono.Data.Sqlite.SqliteCommandUnitTests)}, 
			{ "monotouch_Mono.Runtime.Tests_test.dll", typeof (MonoTests.Runtime.JitTests)}, 

		};

		public static void RegisterTypes () 
		{
			// line used to ensure that the runner is not remove by the linker :/
#if MONOMAC
			Console.WriteLine ($"Got the runner for the linker {typeof(Xunit.Sdk.AllException)}");
#else
			Console.WriteLine ($"Got the runner for the linker {typeof(Xunit.Sdk.TypeUtility)}");
#endif
			foreach (var a in TypesToRegister.Keys) {
				// do something with the type, so that it is not removed
				var assemblyPath = Path.GetFileName (TypesToRegister[a].Assembly.Location);
				Console.WriteLine ($"We are using type {TypesToRegister[a]} from assembly {assemblyPath}");
			}
		}
	}
}