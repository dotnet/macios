using System.IO;
using System.Text;
using System.Xml;

var file = args [0];
var output = args [1];
var doc = new XmlDocument ();
doc.Load (file);

var sb = new StringBuilder ();
sb.Append (
@"//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool: generate-errors.csharp
// </auto-generated>
//------------------------------------------------------------------------------

namespace Xamarin.Bundler {
	internal class Errors {
");

foreach (XmlNode node in doc.SelectNodes ("/root/data")!) {
	var name = node.Attributes! ["name"]!.InnerText;
	if (name == "default") {
		name = "@" + name;
	}
	var value = node.ChildNodes [1]!.InnerText
		.Trim ()
		.Replace ("\\", "\\\\")
		.Replace ("\"", "\\\"");
	sb.AppendLine ($"\t\tinternal const string {name} = \"{value}\";");
}

sb.AppendLine ("\t}\n}");
File.WriteAllText (output, sb.ToString ());
